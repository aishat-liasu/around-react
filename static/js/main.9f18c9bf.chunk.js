(this["webpackJsonparound-react"]=this["webpackJsonparound-react"]||[]).push([[0],{11:function(e,t,a){},13:function(e,t,a){"use strict";a.r(t);var c=a(1),s=a.n(c),n=a(4),l=a.n(n),i=(a(11),a(2)),o=a(0),r=function(){return Object(o.jsx)("header",{className:"header",children:Object(o.jsx)("div",{className:"logo"})})},p=a(5),u=a(6),d=new(function(){function e(t){Object(p.a)(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}return Object(u.a)(e,[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Error: ".concat(e.status))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then(this._checkResponse)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then(this._checkResponse)}},{key:"updateUserInfo",value:function(e){return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e.profileName,about:e.profileJob})}).then(this._checkResponse)}},{key:"updateUserAvatar",value:function(e){return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e.profilePictureURL})}).then(this._checkResponse)}},{key:"uploadPlace",value:function(e){return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:e.name,link:e.link})}).then(this._checkResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}},{key:"likeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"PUT",headers:this._headers}).then(this._checkResponse)}},{key:"unlikeCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/likes/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}}]),e}())({baseUrl:"https://around.nomoreparties.co/v1/group-11",headers:{authorization:"403bdafc-0a52-4e02-9b82-c7e8e4f7ffb1","Content-Type":"application/json"}}),b=function(e){var t=Object(c.useState)(!1),a=Object(i.a)(t,2),s=a[0],n=a[1],l=Object(c.useState)(!1),r=Object(i.a)(l,2),p=r[0],u=r[1];return Object(c.useEffect)((function(){return e.cardData.owner._id!==e.userId&&u(!0),e.cardData.likes.some((function(t){return t._id===e.userId}))&&n(!0),function(){}}),[e]),Object(o.jsxs)("div",{className:"place",children:[Object(o.jsx)("button",{className:"place__delete-button ".concat(p?"hidden":""),onClick:function(){e.onDeleteButtonClick(!0)}}),Object(o.jsx)("img",{src:e.cardData.link||"",alt:e.cardData.name,className:"place__image",onClick:function(){e.onCardClick(e.cardData)}}),Object(o.jsx)("h2",{className:"place__title",children:e.cardData.name||"Title"}),Object(o.jsxs)("div",{className:"place__love-section",children:[Object(o.jsx)("button",{className:"place__love-button ".concat(s?"place__love-button_active":""),onClick:function(){n(!0)}}),Object(o.jsx)("p",{className:"place__love-count",children:e.cardData.likes.length})]})]})},j=function(e){var t=Object(c.useState)("Jacques Cousteau"),a=Object(i.a)(t,2),s=a[0],n=a[1],l=Object(c.useState)("Explorer"),r=Object(i.a)(l,2),p=r[0],u=r[1],j=Object(c.useState)(""),_=Object(i.a)(j,2),h=_[0],m=_[1],f=Object(c.useRef)(""),O=Object(c.useState)([]),x=Object(i.a)(O,2),N=x[0],k=x[1];return Object(c.useEffect)((function(){Promise.all([d.getUserInfo(),d.getInitialCards()]).then((function(e){n(e[0].name),u(e[0].about),m(e[0].avatar),f.current=e[0]._id,k(e[1])})).catch((function(e){console.log(e)}))}),[]),Object(o.jsxs)("main",{className:"main",children:[Object(o.jsxs)("section",{className:"profile",children:[Object(o.jsxs)("div",{className:"profile__content",children:[Object(o.jsx)("div",{className:"profile__avatar",style:{backgroundImage:"url(".concat(h,")")},children:Object(o.jsx)("div",{className:"profile__overlay",onClick:e.onAvatarClick})}),Object(o.jsxs)("div",{className:"profile__info",children:[Object(o.jsxs)("div",{className:"profile__title-edit",children:[Object(o.jsx)("h1",{className:"profile__title",children:s}),Object(o.jsx)("button",{type:"submit",className:"profile__edit-button",onClick:e.onEditProfileClick})]}),Object(o.jsx)("p",{className:"profile__subtitle",children:p})]})]}),Object(o.jsx)("button",{type:"submit",className:"profile__add-button","aria-label":"add",onClick:e.onAddPlaceClick})]}),Object(o.jsx)("section",{className:"places",children:N.map((function(t){return Object(o.jsx)(b,{userId:f.current,cardData:t,onCardClick:e.onCardClick,onDeleteButtonClick:e.onDeletePlaceClick},t._id)}))})]})},_=function(){return Object(o.jsx)("footer",{className:"footer",children:Object(o.jsx)("p",{className:"footer__copyright",children:"\xa9 2021 Around the U.S"})})},h=function(e){return Object(o.jsx)("section",{className:"popup popup_type_".concat(e.name," ").concat(e.isOpen?"popup_opened":""),id:"popup_type_".concat(e.name),children:Object(o.jsxs)("form",{className:"popup__form",id:"popup__form_type_".concat(e.name),children:[Object(o.jsx)("button",{type:"reset",className:"popup__close-button","aria-label":"close",onClick:e.onClose}),Object(o.jsx)("h2",{className:"popup__heading",children:e.title||"Popup Title"}),e.children,Object(o.jsx)("button",{type:"submit",className:"popup__submit-button",children:e.buttonText})]})})},m=function(e){return Object(o.jsx)("section",{className:"popup popup_type_image ".concat(e.isOpen?"popup_opened":""," "),id:"popup_type_image",children:Object(o.jsxs)("div",{className:"popup__container",children:[Object(o.jsx)("button",{type:"reset",className:"popup__close-button","aria-label":"close",onClick:e.onClose}),Object(o.jsx)("img",{src:e.cardData.link||"",alt:"popup",className:"popup__image"}),Object(o.jsx)("p",{className:"popup__image-location",children:e.cardData.name})]})})};var f=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),a=t[0],s=t[1],n=Object(c.useState)(!1),l=Object(i.a)(n,2),p=l[0],u=l[1],d=Object(c.useState)(!1),b=Object(i.a)(d,2),f=b[0],O=b[1],x=Object(c.useState)(!1),N=Object(i.a)(x,2),k=N[0],C=N[1],g=Object(c.useState)(!1),v=Object(i.a)(g,2),y=v[0],U=v[1],P=Object(c.useState)({}),S=Object(i.a)(P,2),D=S[0],T=S[1];function L(e){s(!1),O(!1),u(!1),U(!1),C(!1),T({})}return Object(o.jsxs)("div",{className:"page",children:[Object(o.jsxs)(h,{title:"Edit Profile",name:"edit",isOpen:a,onClose:L,buttonText:"Save",children:[Object(o.jsxs)("label",{className:"popup__label",children:[Object(o.jsx)("input",{type:"text",id:"profile-title",name:"profileName",className:"popup__field popup__field_el_title",minLength:"2",maxLength:"45",placeholder:"Name",required:!0}),Object(o.jsx)("span",{className:"popup__field-error",id:"profile-title-error"})]}),Object(o.jsxs)("label",{className:"popup__label",children:[Object(o.jsx)("input",{type:"text",id:"profile-subtitle",name:"profileJob",className:"popup__field popup__field_el_subtitle",minLength:"2",maxLength:"200",placeholder:"About",required:!0}),Object(o.jsx)("span",{className:"popup__field-error",id:"profile-subtitle-error"})]})]}),Object(o.jsxs)(h,{title:"New Place",name:"add",isOpen:p,onClose:L,buttonText:"Save",children:[Object(o.jsxs)("label",{className:"popup__label",children:[Object(o.jsx)("input",{type:"text",name:"placeName",id:"place-title",className:"popup__field popup__field_el_place-title",placeholder:"Title",minLength:"1",maxLength:"30",required:!0}),Object(o.jsx)("span",{className:"popup__field-error",id:"place-title-error"})]}),Object(o.jsxs)("label",{className:"popup__label",children:[Object(o.jsx)("input",{type:"url",name:"placeImageURL",id:"place-image-url",className:"popup__field popup__field_el_place-image-url",placeholder:"Image URL",required:!0}),Object(o.jsx)("span",{className:"popup__field-error",id:"place-image-url-error"})]})]}),Object(o.jsx)(h,{title:"Update Profile Picture",name:"change",isOpen:f,onClose:L,buttonText:"Save",children:Object(o.jsxs)("label",{className:"popup__label",children:[Object(o.jsx)("input",{type:"url",name:"profilePictureURL",id:"profile-picture-url",className:"popup__field popup__field_el_profile-picture-url",placeholder:"Image URL",required:!0}),Object(o.jsx)("span",{className:"popup__field-error",id:"profile-picture-url-error"})]})}),Object(o.jsx)(h,{title:"Are you sure?",name:"confirm",isOpen:y,onClose:L,buttonText:"Yes"}),Object(o.jsx)(m,{cardData:D,isOpen:k,onClose:L}),Object(o.jsx)(r,{}),Object(o.jsx)(j,{selectedCard:D,onEditProfileClick:function(){s(!0)},onAddPlaceClick:function(){u(!0)},onAvatarClick:function(){O(!0)},onCardClick:function(e){T(e),C(!0)},onDeletePlaceClick:function(){U(!0)}}),Object(o.jsx)(_,{})]})},O=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,14)).then((function(t){var a=t.getCLS,c=t.getFID,s=t.getFCP,n=t.getLCP,l=t.getTTFB;a(e),c(e),s(e),n(e),l(e)}))};l.a.render(Object(o.jsx)(s.a.StrictMode,{children:Object(o.jsx)(f,{})}),document.getElementById("root")),O()}},[[13,1,2]]]);
//# sourceMappingURL=main.9f18c9bf.chunk.js.map